<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Thêm tài khoản</title>
    <content th:replace="fragments/initStyle :: content"></content>
    <style>
        #errorMessage {
            padding: 11px;
        }
    </style>
</head>
<body>
<div id="wrapper">
    <content th:replace="nav :: content"></content>
    <div id="page-wrapper" style="min-height: 600px;">
        <div class="row">
            <div class="col-lg-12">
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        Thêm user account mới
                    </div>
                    <div class="panel-body">
                        <form class="registerForm" th:object="${user}" th:action="@{/user/user_add.html}" method="POST">
                            <div class="alert alert-danger" id="errorMessage"
                                 style="text-align:left; color: red; font-weight: bold; font-size: 13px;"
                                 th:each="err: ${#fields.errors('*')}" th:text="${err}"></div>
                            <input type="hidden" name="txtPassword" id="txtPassword" th:value="${defaultPassword}"/>
                            <div class="col-lg-6 col-xs-12">
                                <div class="form-group">
                                    <label>Tên đầy đủ</label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-user fa"
                                                                           aria-hidden="true"></i></span>
                                        <input class="form-control" type="text" id="form-field-fullname"
                                               name="fullName" th:field="*{fullName}"/>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Giới tính</label>
                                    <div>
                                        <select data-live-search-style="startsWith" class="selectpicker form-control"
                                                id="form-field-gender" th:field="*{gender}">
                                            <option value="0">Nam</option>
                                            <option value="1">Nữ</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Email&nbsp;<span style="color: red">(&#42;)</span></label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-envelope"></i></span>
                                        <input class="form-control" type="text" id="form-field-email" name="email"
                                               th:field="*{email}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Tên đăng nhập&nbsp;<span style="color: red">(&#42;)</span></label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-user fa"
                                                                           aria-hidden="true"></i></span>
                                        <input class="form-control" type="text" id="form-field-username" name="userName"
                                               th:field="*{userName}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Loại tài khoản</label>
                                    <div>
                                        <select data-live-search-style="startsWith" class="selectpicker form-control"
                                                id="form-field-userType" th:field="*{userType}">
                                            <option value="0">Telcos</option>
                                            <option value="1">Org</option>
                                            <option value="2">Partner</option>
                                        </select>
                                    </div>
                                </div>

                            </div>
                            <div class="col-lg-6 col-xs-12">
                                <div class="form-group">
                                    <label>Mật khẩu</label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-lock fa-lg"
                                                                           aria-hidden="true"></i></span>
                                        <input class="form-control" type="text" id="form-field-password"
                                               th:field="*{password}" readonly/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Xác nhận mật khẩu</label>
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-lock fa-lg"
                                                                           aria-hidden="true"></i></span>
                                        <input class="form-control" type="text" id="form-field-password"
                                               th:field="*{verifyPassword}" readonly/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Xác minh tài khoản</label>
                                    <div>
                                        <select data-live-search-style="startsWith" class="selectpicker form-control"
                                                id="form-field-verify" th:field="*{isVerified}">
                                            <option value="0">Đã xác minh</option>
                                            <option value="1">Chưa xác minh</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Trạng thái</label>
                                    <div>
                                        <select data-live-search-style="startsWith" class="selectpicker form-control"
                                                id="form-field-status" th:field="*{status}">
                                            <option value="0">Active</option>
                                            <option value="1">Block</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Phân quyền Role</label>
                                    <div>
                                        <label th:each="role : ${allRoles}" th:title="${role.description}">
                                            <input th:field="*{roles}" type="checkbox" th:value="${role.id}"
                                                   style="position: inherit;opacity: 0.5;"/>
                                            <span style="color: #0e90d2" class="lbl" th:text="${role.name}"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <div class="form-group text-center">
                                    <button type="submit" class="btn btn-info">Thêm mới</button>
                                    <a th:href="@{/user/user_list.html}" href="/user/user_list" class="btn btn-warning">Bỏ
                                        qua
                                    </a>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-6 -->
            </div>
        </div>
    </div>
    <!-- /.row -->
</div>
<!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->

<content th:replace="fragments/initScript :: content"></content>

<script>
    $(document).ready(function () {
        $('.registerForm').bootstrapValidator({
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                email: {
                    validators: {
                        notEmpty: {
                            message: 'Địa chỉ email bắt buộc phải nhập'
                        },
                        emailAddress: {
                            message: 'Địa chỉ email không đúng định dạng'
                        }
                    }
                },
                userName: {
                    validators: {
                        notEmpty: {
                            message: 'Username bắt buộc phải nhập '
                        },
                        regexp: {
                            regexp: /^[a-z0-9]+$/,
                            message: 'Username là các ký tự thường, chữ số'
                        },
                        stringLength: {
                            min: 0,
                            max: 5,
                            message: 'Username có độ dài nhỏ hơn 5 kí tự'
                        }
                    }
                }
            }
        })
    })

</script>

<script>
    $("#errorMessage").hide().fadeIn(0).delay(1500).fadeOut(700);
</script>

</body>

</html>
